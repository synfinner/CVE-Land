#!/bin/bash

# cd into the gsd-database directory
cd gsd-database

# echo the current directory
echo "Current directory: $(pwd)"

#echo that we are running git pull
echo "Running git pull..."
# run git pull
git pull

# if git pull returns that the local repository is up to date exit
if [ "$?" = "0" ]; then
    echo "No changes to pull"
    exit
fi

cd .. # cd out of gsd-database
# activate the virtual environment
echo "Activating virtual environment..."
source venv/bin/activate
# echo that we are running the python script to update mongodb
echo "Running python script to update mongodb..."
# run the python script to update mongodb
python3 mmongo.py

# deactivate the virtual environment once the script is done
deactivate

# echo that the script is complete
echo "Update complete!"